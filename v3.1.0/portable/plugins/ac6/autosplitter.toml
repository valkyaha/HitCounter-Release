# =============================================================================
# AUTOSPLITTER CONFIGURATION
# =============================================================================

[autosplitter]
enabled = true
algorithm = "binary_tree"

# Binary tree algorithm configuration (AC6 style)
# Based on SoulSplitter by FrankvdStam
[autosplitter.tree_config]
primary_pattern = "cs_event_flag_man"
pointer_chain = []  # Direct access after RIP resolution
divisor_offset = 0x1c
tree_root_offset = 0x38
multiplier_offset = 0x20
base_addr_offset = 0x28

# Memory patterns for finding game data structures
# Based on SoulSplitter by FrankvdStam
# https://github.com/FrankvdStam/SoulSplitter

[[autosplitter.patterns]]
name = "cs_event_flag_man"
pattern = "48 8B 35 ? ? ? ? 83 F8 FF 0F 44 C1"
rip_offset = 3
instruction_len = 7
pointer_offsets = [0, 0]

[[autosplitter.patterns]]
name = "fd4_time"
pattern = "48 8B 0D ? ? ? ? 0F 28 C8 F3 0F 59 0D"
rip_offset = 3
instruction_len = 7
pointer_offsets = [0, 0]

[[autosplitter.patterns]]
name = "cs_menu_man"
pattern = "48 8B 35 ? ? ? ? 33 DB 89 5C 24 20"
rip_offset = 3
instruction_len = 7
pointer_offsets = [0, 0]

# =============================================================================
# POINTER CHAINS - Derived pointers from base patterns
# =============================================================================

[autosplitter.pointers]
# IGT from FD4Time
igt = { base = "fd4_time", offsets = [0, 0] }

# =============================================================================
# MEMORY LAYOUT - Offsets for reading values
# =============================================================================

[autosplitter.memory_layout]
# IGT offset (from IGT pointer)
igt_offset = 0x114

# Loading state check at CSMenuMan + 0x8E4
loading_offset = 0x8E4

# Event flag tree constants (same as Elden Ring)
[autosplitter.memory_layout.event_flag_tree]
divisor_offset = 0x1C
root_offset = 0x38
first_sub_element = 0x8
left_child = 0x0
right_child = 0x10
leaf_check_offset = 0x19
category_offset = 0x20
mystery_value_offset = 0x28
element_value_offset = 0x30
base_address_offset = 0x28
